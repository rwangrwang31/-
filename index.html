<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NO GAME NO LIFE - æ¸¸æˆäººç”Ÿ | SYSTEM LOGIN</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Noto+Sans+SC:wght@300;400;500;700&family=ZCOOL+XiaoWei&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-pink: #ff2a6d;
            --primary-cyan: #05d9e8;
            --primary-purple: #d905e8;
            --primary-gold: #ffd700; /* å¢åŠ é‡‘è‰²ç”¨äºç¥çµç§ */
            --dark-bg: #11001c;
            --glass-bg: rgba(20, 20, 35, 0.7);
            --glass-border: rgba(255, 255, 255, 0.15);
            --hud-bg: rgba(10, 5, 15, 0.95);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; cursor: none; }

        body {
            background-color: var(--dark-bg);
            color: white;
            font-family: 'Noto Sans SC', sans-serif;
            min-height: 100vh;
            overflow: hidden;
        }
        
        body.unlocked { overflow-x: hidden; overflow-y: auto; }

        #site-wrapper {
            transition: filter 0.8s ease, opacity 0.8s ease;
            filter: blur(15px); opacity: 0.5; pointer-events: none;
            width: 100%; min-height: 100vh;
        }
        body.unlocked #site-wrapper { filter: blur(0); pointer-events: all; opacity: 1; }

        /* LOGIN UI */
        #login-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            z-index: 100000; display: flex; flex-direction: column; justify-content: center; align-items: center;
            background: rgba(10, 5, 20, 0.6); backdrop-filter: blur(8px);
        }
        
        .login-box {
            width: 420px; padding: 40px; background: rgba(0, 0, 0, 0.85);
            border: 2px solid var(--primary-pink); box-shadow: 0 0 50px rgba(255, 42, 109, 0.4);
            text-align: center; position: relative; transition: transform 0.3s;
        }
        
        .login-box::before {
            content: "CHALLENGER DETECTED";
            position: absolute; top: -15px; left: 50%; transform: translateX(-50%);
            background: var(--dark-bg); padding: 0 10px;
            color: var(--primary-pink); font-family: 'Orbitron', sans-serif; letter-spacing: 2px;
            font-size: 0.9rem; border: 1px solid var(--primary-pink);
        }

        .login-title {
            font-family: 'Orbitron', sans-serif; font-size: 1.8rem; margin-bottom: 20px;
            color: white; text-shadow: 0 0 10px var(--primary-cyan);
        }

        .input-group { margin-bottom: 15px; position: relative; }
        .login-input {
            width: 100%; padding: 12px; background: rgba(255,255,255,0.1);
            border: 1px solid #555; color: white; font-family: 'Orbitron', sans-serif;
            text-align: center; outline: none; transition: 0.3s; font-size: 1rem;
        }
        .login-input:focus { border-color: var(--primary-cyan); box-shadow: 0 0 15px rgba(5, 217, 232, 0.3); }
        
        .login-btn {
            width: 100%; padding: 12px; background: transparent;
            border: 2px solid var(--primary-pink); color: var(--primary-pink);
            font-family: 'Orbitron', sans-serif; font-size: 1.1rem; cursor: none;
            transition: 0.3s; margin-top: 5px; font-weight: bold; text-transform: uppercase;
        }
        .login-btn:hover:not(:disabled) { background: var(--primary-pink); color: white; box-shadow: 0 0 30px var(--primary-pink); }
        .login-btn:disabled { border-color: #555; color: #555; cursor: wait; }

        .links-row { margin-top: 15px; display: flex; justify-content: space-between; font-size: 0.8rem; }
        .toggle-link { color: #aaa; cursor: none; text-decoration: underline; transition: 0.3s; }
        .toggle-link:hover { color: var(--primary-cyan); text-shadow: 0 0 5px var(--primary-cyan); }
        .error-msg { color: #ff2a6d; margin-top: 10px; font-size: 0.9rem; min-height: 20px; font-family: 'Orbitron', sans-serif; letter-spacing: 1px; }
        .hidden { display: none; }

        /* Common Styles */
        ::-webkit-scrollbar { width: 6px; height: 6px; }
        ::-webkit-scrollbar-track { background: #050505; }
        ::-webkit-scrollbar-thumb { background: var(--primary-cyan); border-radius: 3px; }
        ::-webkit-scrollbar-thumb:hover { background: var(--primary-pink); }
        #cursor { width: 20px; height: 20px; border: 2px solid var(--primary-cyan); border-radius: 50%; position: fixed; pointer-events: none; z-index: 200000; transform: translate(-50%, -50%); transition: width 0.2s, height 0.2s, background 0.2s; mix-blend-mode: difference; }
        #cursor.hovered { width: 50px; height: 50px; background: rgba(255, 42, 109, 0.2); border-color: var(--primary-pink); box-shadow: 0 0 20px var(--primary-pink); }
        #bg-canvas { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; }
        #loader { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #000; display: none; justify-content: center; align-items: center; flex-direction: column; z-index: 99990; transition: opacity 1s ease; }
        .loader-text { font-family: 'Orbitron', sans-serif; font-size: 3rem; font-weight: 900; color: transparent; -webkit-text-stroke: 2px var(--primary-pink); animation: pulse 2s infinite; }
        .loader-sub { margin-top: 10px; color: var(--primary-cyan); letter-spacing: 5px; font-size: 0.8rem; }
        nav { position: fixed; top: 0; width: 100%; padding: 20px 50px; display: flex; justify-content: space-between; align-items: center; z-index: 100; backdrop-filter: blur(10px); background: rgba(0,0,0,0.5); border-bottom: 1px solid rgba(255,255,255,0.05); }
        .logo { font-family: 'Orbitron', sans-serif; font-weight: 900; font-size: 1.5rem; background: linear-gradient(90deg, var(--primary-pink), var(--primary-cyan)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; text-shadow: 0 0 20px rgba(255, 42, 109, 0.5); }
        .nav-links a { color: white; text-decoration: none; margin-left: 30px; font-size: 0.9rem; position: relative; transition: color 0.3s; font-family: 'Orbitron', sans-serif; }
        .nav-links a:hover { color: var(--primary-cyan); text-shadow: 0 0 8px var(--primary-cyan); }
        .hero { height: 100vh; display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center; position: relative; }
        .hero h1 { font-family: 'Orbitron', sans-serif; font-size: 5rem; line-height: 1; margin-bottom: 20px; text-transform: uppercase; position: relative; z-index: 2; }
        .glitch { position: relative; color: white; } .glitch::before, .glitch::after { content: attr(data-text); position: absolute; top: 0; left: 0; width: 100%; height: 100%; }
        .glitch::before { left: 2px; text-shadow: -1px 0 var(--primary-pink); clip: rect(24px, 550px, 90px, 0); animation: glitch-anim-2 3s infinite linear alternate-reverse; }
        .glitch::after { left: -2px; text-shadow: -1px 0 var(--primary-cyan); clip: rect(85px, 550px, 140px, 0); animation: glitch-anim 2.5s infinite linear alternate-reverse; }
        .hero p { font-size: 1.2rem; max-width: 600px; color: #ccc; margin-bottom: 40px; text-shadow: 0 0 10px rgba(0,0,0,0.5); }
        .cta-btn { padding: 15px 40px; font-size: 1.2rem; font-family: 'Orbitron', sans-serif; background: rgba(0,0,0,0.5); color: white; border: 2px solid var(--primary-pink); border-radius: 4px; position: relative; overflow: hidden; transition: all 0.3s; box-shadow: 0 0 15px var(--primary-pink); text-shadow: 0 0 5px var(--primary-pink); }
        .cta-btn:hover { background: var(--primary-pink); box-shadow: 0 0 40px var(--primary-pink); transform: scale(1.05) translateY(-2px); }
        .section-title { font-family: 'Orbitron', sans-serif; font-size: 3rem; margin-bottom: 60px; background: linear-gradient(to bottom, #fff, #aaa); -webkit-background-clip: text; -webkit-text-fill-color: transparent; text-shadow: 0 0 30px rgba(5, 217, 232, 0.3); text-align: center; letter-spacing: 5px; }
        .pledges { padding: 120px 20px; display: flex; flex-direction: column; align-items: center; background: linear-gradient(to bottom, transparent, rgba(17, 0, 28, 0.9)); position: relative; }
        .pledge-container { display: grid; grid-template-columns: 1fr 1fr; gap: 25px; max-width: 1000px; width: 90%; perspective: 1000px; }
        .pledge-card { background: var(--glass-bg); border: 1px solid var(--glass-border); padding: 25px 30px; border-radius: 8px; position: relative; overflow: hidden; transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); display: flex; align-items: center; min-height: 100px; }
        .pledge-card:nth-child(odd) { border-left: 4px solid var(--primary-pink); } .pledge-card:nth-child(even) { border-right: 4px solid var(--primary-cyan); text-align: right; flex-direction: row-reverse; }
        .pledge-card:hover { transform: translateY(-5px) scale(1.02); background: rgba(255, 255, 255, 0.08); box-shadow: 0 10px 40px rgba(0,0,0,0.5); }
        .pledge-num { font-family: 'Orbitron', sans-serif; font-weight: 900; font-size: 5rem; position: absolute; top: 50%; transform: translateY(-50%); opacity: 0.1; z-index: 0; pointer-events: none; transition: opacity 0.3s; }
        .pledge-card:nth-child(odd) .pledge-num { left: 10px; color: var(--primary-pink); } .pledge-card:nth-child(even) .pledge-num { right: 10px; color: var(--primary-cyan); } .pledge-card:hover .pledge-num { opacity: 0.3; }
        .pledge-text { font-size: 1.1rem; z-index: 1; font-weight: 500; width: 100%; padding: 0 10px; }

        /* --- WORLD DATABASE --- */
        #world {
            padding: 100px 20px; background: #0b0514; position: relative;
            /* Hexagon + Chess Board Texture */
            background-image: 
                radial-gradient(circle at 50% 50%, rgba(217, 5, 232, 0.05) 0%, transparent 60%),
                url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M0 0h30v30H0zM30 30h30v30H30z' fill='%2305d9e8' fill-opacity='0.03'/%3E%3C/svg%3E");
        }
        .world-container {
            max-width: 1200px; margin: 0 auto; /* å¢åŠ å®½åº¦ä»¥å®¹çº³ 16 ç§æ— */
            border: 1px solid var(--glass-border);
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(10px);
            border-radius: 10px; overflow: hidden;
            box-shadow: 0 0 50px rgba(5, 217, 232, 0.1);
        }
        .world-tabs { display: flex; border-bottom: 1px solid var(--primary-cyan); background: rgba(5, 217, 232, 0.1); }
        .world-tab {
            flex: 1; padding: 20px; text-align: center; font-family: 'Orbitron', sans-serif; color: #888;
            cursor: none; transition: 0.3s; border-right: 1px solid rgba(255,255,255,0.1); position: relative; overflow: hidden;
        }
        .world-tab.active { color: #fff; background: rgba(5, 217, 232, 0.2); text-shadow: 0 0 10px var(--primary-cyan); }
        .world-tab.active::after {
            content: ''; position: absolute; bottom: 0; left: 0; width: 100%; height: 3px;
            background: var(--primary-cyan); box-shadow: 0 0 15px var(--primary-cyan);
        }
        
        .world-content { padding: 40px; min-height: 400px; color: #ddd; line-height: 1.8; position: relative; }
        .world-content h3 {
            font-family: 'Orbitron', sans-serif; font-size: 2rem; color: var(--primary-pink);
            margin-bottom: 20px; border-bottom: 1px dashed var(--primary-purple); padding-bottom: 10px; display: inline-block;
        }
        .world-text { font-family: 'Noto Sans SC', sans-serif; font-size: 1.1rem; text-align: justify; }

        /* --- 16 RACES CHESS BOARD --- */
        .exceed-board {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px; margin-top: 20px;
        }
        
        .piece-card {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid var(--glass-border);
            border-radius: 8px;
            padding: 20px;
            position: relative;
            overflow: hidden;
            transition: all 0.4s ease;
            height: 200px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        /* Hover Effects */
        .piece-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            background: rgba(255, 255, 255, 0.08);
        }
        .piece-card:hover .piece-icon { opacity: 0.3; transform: scale(1.2) rotate(-10deg); }
        .piece-card:hover .piece-name { color: white; text-shadow: 0 0 10px currentColor; }

        /* Background Chess Icon */
        .piece-icon {
            position: absolute;
            bottom: -20px; right: -20px;
            font-size: 8rem;
            opacity: 0.1;
            color: white;
            transition: all 0.5s ease;
            pointer-events: none;
        }

        /* Rank (I - XVI) */
        .piece-rank {
            font-family: 'Orbitron', sans-serif;
            font-size: 2.5rem;
            font-weight: 900;
            opacity: 0.2;
            position: absolute;
            top: 10px; left: 15px;
        }

        /* Text Content */
        .piece-info { position: relative; z-index: 2; margin-top: auto; }
        .piece-chess-role {
            font-family: 'Orbitron', sans-serif;
            font-size: 0.8rem;
            color: #aaa;
            text-transform: uppercase;
            letter-spacing: 2px;
            margin-bottom: 5px;
        }
        .piece-name {
            font-family: 'Orbitron', sans-serif; /* English name */
            font-weight: bold;
            font-size: 1.2rem;
            color: var(--primary-cyan);
            margin-bottom: 2px;
            transition: color 0.3s;
        }
        .piece-jp-name {
            font-family: 'Noto Sans SC', sans-serif;
            font-size: 0.9rem;
            color: #ddd;
            margin-bottom: 8px;
        }
        .piece-desc {
            font-size: 0.8rem;
            color: #888;
            line-height: 1.4;
            border-top: 1px solid rgba(255,255,255,0.1);
            padding-top: 8px;
        }

        /* Special Styling for Ranks */
        /* Rank 1: God (Gold) */
        .piece-card.rank-1 { border-color: var(--primary-gold); box-shadow: inset 0 0 20px rgba(255, 215, 0, 0.1); }
        .piece-card.rank-1 .piece-name { color: var(--primary-gold); }
        .piece-card.rank-1:hover { box-shadow: 0 0 30px rgba(255, 215, 0, 0.3); }

        /* Rank 2: Phantasma (Purple) */
        .piece-card.rank-2 { border-color: var(--primary-purple); }
        .piece-card.rank-2 .piece-name { color: var(--primary-purple); }

        /* Rank 16: Imanity (Special Glow) */
        .piece-card.rank-16:hover {
            border-color: white;
            animation: rainbow-border 2s infinite linear;
        }
        @keyframes rainbow-border {
            0% { box-shadow: 0 0 10px var(--primary-pink); }
            50% { box-shadow: 0 0 10px var(--primary-cyan); }
            100% { box-shadow: 0 0 10px var(--primary-purple); }
        }

        /* Characters */
        .characters { padding: 100px 50px; position: relative; } .char-gallery { display: flex; justify-content: center; gap: 40px; flex-wrap: wrap; } .char-card { width: 280px; height: 400px; position: relative; perspective: 1000px; } .char-inner { width: 100%; height: 100%; transition: transform 0.6s; transform-style: preserve-3d; position: relative; cursor: pointer; } .char-card:hover .char-inner { transform: rotateY(180deg); } .char-front, .char-back { position: absolute; width: 100%; height: 100%; -webkit-backface-visibility: hidden; backface-visibility: hidden; border-radius: 15px; display: flex; flex-direction: column; justify-content: center; align-items: center; overflow: hidden; border: 1px solid rgba(255,255,255,0.1); background: rgba(20, 20, 30, 0.9); box-shadow: 0 0 20px rgba(0,0,0,0.5); } .char-front { background: linear-gradient(135deg, rgba(42, 14, 54, 0.9), rgba(0, 0, 0, 0.95)); border-top: 2px solid var(--primary-purple); } .char-avatar { width: 140px; height: 140px; border-radius: 50%; background-color: #fff; margin-bottom: 20px; border: 3px solid white; box-shadow: 0 0 25px var(--primary-pink); background-size: cover; background-repeat: no-repeat; } .char-name { font-family: 'Orbitron', sans-serif; font-size: 1.5rem; color: var(--primary-pink); text-transform: uppercase; letter-spacing: 2px; } .char-race { color: var(--primary-cyan); font-size: 0.9rem; margin-top: 5px; } .char-back { background: linear-gradient(135deg, var(--primary-pink), var(--primary-purple)); transform: rotateY(180deg); padding: 25px; text-align: center; } .char-desc { font-size: 0.9rem; line-height: 1.8; }

        /* Reader PRO */
        #novel-reader { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: var(--hud-bg); z-index: 5000; display: flex; flex-direction: column; opacity: 0; pointer-events: none; transition: opacity 0.5s ease; backdrop-filter: blur(20px); } #novel-reader.active { opacity: 1; pointer-events: all; } .reader-header { height: 60px; width: 100%; border-bottom: 1px solid rgba(255, 42, 109, 0.3); display: flex; justify-content: space-between; align-items: center; padding: 0 30px; background: rgba(0,0,0,0.5); box-shadow: 0 5px 20px rgba(255, 42, 109, 0.1); } .reader-title { font-family: 'Orbitron', sans-serif; color: var(--primary-cyan); font-weight: 700; letter-spacing: 2px; display: flex; align-items: center; gap: 10px; } .reader-title::before { content: ''; display: block; width: 10px; height: 10px; background: var(--primary-pink); box-shadow: 0 0 10px var(--primary-pink); transform: rotate(45deg); } .reader-body { flex: 1; display: flex; overflow: hidden; height: calc(100vh - 60px); } .sidebar { width: 300px; background: rgba(0,0,0,0.4); border-right: 1px solid var(--glass-border); display: flex; flex-direction: column; transition: transform 0.3s; } .sidebar-tabs { display: flex; height: 50px; border-bottom: 1px solid var(--glass-border); } .sidebar-tab { flex: 1; background: transparent; border: none; color: #888; font-family: 'Orbitron', sans-serif; font-size: 0.9rem; transition: 0.3s; border-bottom: 2px solid transparent; } .sidebar-tab.active { color: white; background: rgba(255, 255, 255, 0.05); border-bottom-color: var(--primary-cyan); text-shadow: 0 0 10px var(--primary-cyan); } .sidebar-content { flex: 1; overflow-y: auto; padding: 0; } .list-item { padding: 15px 20px; border-bottom: 1px solid rgba(255,255,255,0.05); color: #ccc; font-size: 0.9rem; transition: 0.2s; position: relative; } .list-item:hover { background: rgba(5, 217, 232, 0.1); color: var(--primary-cyan); padding-left: 25px; } .list-item.active-chapter { background: linear-gradient(90deg, rgba(255, 42, 109, 0.2), transparent); border-left: 3px solid var(--primary-pink); color: white; } .delete-bm { position: absolute; right: 10px; top: 50%; transform: translateY(-50%); color: #555; font-size: 0.8rem; padding: 5px; } .delete-bm:hover { color: var(--primary-pink); } .text-area-container { flex: 1; display: flex; flex-direction: column; position: relative; background-image: linear-gradient(rgba(5, 217, 232, 0.03) 1px, transparent 1px), linear-gradient(90deg, rgba(5, 217, 232, 0.03) 1px, transparent 1px); background-size: 40px 40px; } .text-viewport { flex: 1; padding: 60px 100px; overflow-y: auto; color: #ddd; font-size: 1.2rem; line-height: 2; font-family: 'ZCOOL XiaoWei', 'Noto Sans SC', serif; text-shadow: 0 0 1px rgba(0,0,0,0.8); } .text-viewport p { margin-bottom: 24px; text-align: justify; } .reader-controls { height: 60px; border-top: 1px solid var(--glass-border); display: flex; justify-content: center; align-items: center; gap: 20px; background: rgba(0,0,0,0.6); backdrop-filter: blur(5px); } .ctrl-btn { padding: 8px 25px; background: rgba(255,255,255,0.05); border: 1px solid var(--glass-border); color: var(--primary-cyan); font-family: 'Orbitron', sans-serif; border-radius: 4px; transition: 0.3s; } .ctrl-btn:hover:not(:disabled) { background: var(--primary-cyan); color: black; box-shadow: 0 0 15px var(--primary-cyan); } .ctrl-btn:disabled { opacity: 0.3; cursor: not-allowed; } .page-indicator { font-family: 'Orbitron', sans-serif; color: #888; font-size: 0.8rem; width: 250px; text-align: center; letter-spacing: 1px; } .bm-btn { border-color: var(--primary-purple); color: var(--primary-purple); } .bm-btn:hover { background: var(--primary-purple); color: white; box-shadow: 0 0 15px var(--primary-purple); } .close-btn { border-color: var(--primary-pink); color: var(--primary-pink); } .close-btn:hover { background: var(--primary-pink); color: white; box-shadow: 0 0 15px var(--primary-pink); } .fallback-ui { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center; } #file-input { display: none; }

        @keyframes pulse { 0% { opacity: 0.5; text-shadow: 0 0 10px var(--primary-pink); } 50% { opacity: 1; text-shadow: 0 0 30px var(--primary-pink), 0 0 50px var(--primary-purple); } 100% { opacity: 0.5; text-shadow: 0 0 10px var(--primary-pink); } }
        @keyframes glitch-anim-2 { 0% { clip: rect(65px, 9999px, 100px, 0); } 100% { clip: rect(60px, 9999px, 90px, 0); } }
        @keyframes glitch-anim { 0% { clip: rect(12px, 9999px, 5px, 0); } 100% { clip: rect(10px, 9999px, 80px, 0); } }
        @keyframes shake { 0% { transform: translateX(0); } 25% { transform: translateX(-10px); } 50% { transform: translateX(10px); } 75% { transform: translateX(-10px); } 100% { transform: translateX(0); } }

        footer { text-align: center; padding: 30px; border-top: 1px solid var(--glass-border); color: rgba(255,255,255,0.3); font-size: 0.8rem; background: #050505; }

        @media (max-width: 768px) { .hero h1 { font-size: 2.5rem; } .nav-links { display: none; } .pledge-container { grid-template-columns: 1fr; } .sidebar { display: none; } .text-viewport { padding: 30px; font-size: 1rem; } .exceed-grid { grid-template-columns: 1fr 1fr; } .login-box { width: 90%; } }
    </style>
</head>
<body>

    <div id="cursor"></div>

    <!-- LOGIN OVERLAY -->
    <div id="login-overlay">
        <div class="login-box hover-target">
            <h2 class="login-title" id="auth-title">SYSTEM LOGIN</h2>
            
            <!-- 1. LOGIN FORM -->
            <div id="login-form">
                <div class="input-group"><input type="email" id="login-email" class="login-input" placeholder="EMAIL" autocomplete="off"></div>
                <div class="input-group"><input type="password" id="login-password" class="login-input" placeholder="PASSWORD"></div>
                <button class="login-btn hover-target" id="btn-login" onclick="handleLogin()">LOGIN</button>
                <div class="links-row">
                    <div class="toggle-link hover-target" onclick="switchAuth('forgot')">FORGOT PASSWORD?</div>
                    <div class="toggle-link hover-target" onclick="switchAuth('register')">REGISTER</div>
                </div>
            </div>

            <!-- 2. REGISTER STEP 1 -->
            <div id="register-step1" class="hidden">
                <div class="input-group"><input type="text" id="reg-user" class="login-input" placeholder="USERNAME" autocomplete="off"></div>
                <div class="input-group"><input type="email" id="reg-email" class="login-input" placeholder="EMAIL" autocomplete="off"></div>
                <div class="input-group"><input type="password" id="reg-pass" class="login-input" placeholder="PASSWORD"></div>
                <button class="login-btn hover-target" id="btn-reg-code" onclick="requestRegCode()">GET CODE</button>
                <div class="toggle-link hover-target" onclick="switchAuth('login')">BACK TO LOGIN</div>
            </div>

            <!-- 3. REGISTER STEP 2 -->
            <div id="register-step2" class="hidden">
                <p style="color:#ccc; font-size:0.8rem; margin-bottom:10px;">Code sent to your email</p>
                <div class="input-group"><input type="text" id="reg-code" class="login-input" placeholder="ENTER 6-DIGIT CODE"></div>
                <button class="login-btn hover-target" id="btn-reg-confirm" onclick="confirmRegister()">CONFIRM REGISTER</button>
                <div class="toggle-link hover-target" onclick="switchAuth('register')">BACK</div>
            </div>

            <!-- 4. FORGOT PASSWORD -->
            <div id="forgot-step1" class="hidden">
                <div class="input-group"><input type="email" id="reset-email" class="login-input" placeholder="EMAIL" autocomplete="off"></div>
                <button class="login-btn hover-target" id="btn-reset-code" onclick="requestResetCode()">SEND CODE</button>
                <div class="toggle-link hover-target" onclick="switchAuth('login')">BACK TO LOGIN</div>
            </div>

            <!-- 5. UPDATE PASSWORD -->
            <div id="forgot-step2" class="hidden">
                <div class="input-group"><input type="text" id="reset-code" class="login-input" placeholder="ENTER CODE"></div>
                <div class="input-group"><input type="password" id="new-password" class="login-input" placeholder="NEW PASSWORD"></div>
                <button class="login-btn hover-target" id="btn-reset-confirm" onclick="confirmReset()">UPDATE PASSWORD</button>
            </div>

            <div id="error-msg" class="error-msg"></div>
        </div>
    </div>

    <!-- SITE WRAPPER -->
    <div id="site-wrapper">
        <div class="bg-layer" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -2; background-image: radial-gradient(circle at 10% 10%, rgba(255, 42, 109, 0.1) 0%, transparent 40%), radial-gradient(circle at 90% 90%, rgba(5, 217, 232, 0.1) 0%, transparent 40%), linear-gradient(rgba(17, 0, 28, 0.8) 1px, transparent 1px), linear-gradient(90deg, rgba(17, 0, 28, 0.8) 1px, transparent 1px); background-size: 100% 100%, 100% 100%, 50px 50px, 50px 50px;"></div>
        <div id="loader"><div class="loader-text">ASCHENTE</div><div class="loader-sub">å‘ç›Ÿçº¦å®£èª“</div></div>
        <canvas id="bg-canvas"></canvas>
        <nav>
            <div class="logo">NO GAME NO LIFE</div>
            <div class="nav-links">
                <a href="#hero" class="hover-target">é¦–é¡µ</a>
                <a href="#pledges" class="hover-target">åæ¡ç›Ÿçº¦</a>
                <a href="#world" class="hover-target">ä¸–ç•Œè§‚</a>
                <a href="#characters" class="hover-target">ä¸»è¦äººç‰©</a>
            </div>
        </nav>
        <!-- READER -->
        <div id="novel-reader">
            <header class="reader-header"><div class="reader-title" id="book-title">NOVEL DATABASE // CONNECTED</div><button class="ctrl-btn close-btn hover-target" onclick="closeReader()">EXIT GAME</button></header>
            <div class="reader-body">
                <aside class="sidebar">
                    <div class="sidebar-tabs"><button class="sidebar-tab active hover-target" onclick="switchTab('toc')">INDEX</button><button class="sidebar-tab hover-target" onclick="switchTab('bookmarks')">MEMORY</button></div>
                    <div id="toc-list" class="sidebar-content"></div><div id="bookmark-list" class="sidebar-content" style="display:none;"></div>
                </aside>
                <div class="text-area-container"><div id="reader-content" class="text-viewport"></div><div class="reader-controls"><button class="ctrl-btn hover-target" id="prev-btn" onclick="changeView(-1)">UP</button><span class="page-indicator" id="page-info">LOADING...</span><button class="ctrl-btn hover-target" id="next-btn" onclick="changeView(1)">DOWN</button><div style="width:20px;"></div><button class="ctrl-btn bm-btn hover-target" onclick="addBookmark()">SAVE</button></div></div>
            </div>
            <input type="file" id="file-input" accept=".txt" onchange="loadFromFile(this)">
        </div>
        <header id="hero" class="hero">
            <h1 class="glitch" data-text="NO GAME NO LIFE">NO GAME NO LIFE</h1>
            <p>åœ¨è¿™ä¸ªä¸€åˆ‡éƒ½ç”±æ¸¸æˆå†³å®šçš„ä¸–ç•Œï¼Œã€Œç©ºç™½ã€å°†æŒ‘æˆ˜ç¥çµã€‚</p>
            <button class="cta-btn hover-target" onclick="startGame()">GAME START</button>
        </header>
        
        <section id="pledges" class="pledges">
            <h2 class="section-title">THE TEN PLEDGES</h2>
            <div class="pledge-container">
                <div class="pledge-card hover-target"><div class="pledge-num">I</div><div class="pledge-text">è¿™ä¸ªä¸–ç•Œç¦æ­¢ä¸€åˆ‡æ€ä¼¤ã€æˆ˜äº‰ä¸æ å¤ºã€‚</div></div>
                <div class="pledge-card hover-target"><div class="pledge-num">II</div><div class="pledge-text">æ‰€æœ‰çº çº·ä¸€å¾‹é€šè¿‡åœ¨æ¸¸æˆä¸­å†³èƒœè´Ÿæ¥è§£å†³ã€‚</div></div>
                <div class="pledge-card hover-target"><div class="pledge-num">III</div><div class="pledge-text">æ¸¸æˆä¸­é¡»èµŒä¸ŠåŒæ–¹è®¤ä¸ºå¯¹ç­‰çš„èµŒæ³¨ã€‚</div></div>
                <div class="pledge-card hover-target"><div class="pledge-num">IV</div><div class="pledge-text">åœ¨ä¸è¿åç¬¬ä¸‰æ¡çš„æƒ…å†µä¸‹ï¼Œæ¸¸æˆå†…å®¹ã€èµŒæ³¨çš†ä¸é™ã€‚</div></div>
                <div class="pledge-card hover-target"><div class="pledge-num">V</div><div class="pledge-text">å—æŒ‘æˆ˜çš„ä¸€æ–¹æœ‰æƒå†³å®šæ¸¸æˆçš„å†…å®¹ã€‚</div></div>
                <div class="pledge-card hover-target"><div class="pledge-num">VI</div><div class="pledge-text">ã€Œå‘ç›Ÿçº¦å®£èª“ã€çš„èµŒæ³¨ç»å¯¹è¦éµå®ˆã€‚</div></div>
                <div class="pledge-card hover-target"><div class="pledge-num">VII</div><div class="pledge-text">é›†å›¢çº çº·åº”æŒ‡å®šå…¨æƒä»£ç†äººã€‚</div></div>
                <div class="pledge-card hover-target"><div class="pledge-num">VIII</div><div class="pledge-text">æ¸¸æˆä¸­è‹¥æœ‰ä¸æ­£å½“è¡Œä¸ºï¼Œä¸€æ—¦è´¥éœ²å³è§†åŒè´¥åŒ—ã€‚</div></div>
                <div class="pledge-card hover-target"><div class="pledge-num">IX</div><div class="pledge-text">ä»¥ç¥ä¹‹åå®£å¸ƒï¼Œä»¥ä¸Šå„æ¡çš†ä¸ºç»å¯¹ä¸å˜çš„è§„åˆ™ã€‚</div></div>
                <div class="pledge-card hover-target"><div class="pledge-num">X</div><div class="pledge-text">å¤§å®¶ä¸€èµ·å’Œå¹³åœ°ç©å§ã€‚</div></div>
            </div>
        </section>

        <!-- NEW WORLD SECTION WITH 16 RACES -->
        <section id="world">
            <h2 class="section-title">WORLD DATABASE</h2>
            <div class="world-container">
                <div class="world-tabs">
                    <div class="world-tab active hover-target" onclick="switchWorldTab('disboard')">DISBOARD</div>
                    <div class="world-tab hover-target" onclick="switchWorldTab('exceed')">IXSEED (16ç§æ—)</div>
                    <div class="world-tab hover-target" onclick="switchWorldTab('history')">ARCHIVE</div>
                </div>
                <div class="world-content" id="world-display-area"></div>
            </div>
        </section>

        <section id="characters" class="characters">
            <h2 class="section-title">PLAYERS</h2>
            <div class="char-gallery">
                <div class="char-card hover-target"><div class="char-inner"><div class="char-front"><div class="char-avatar" style="background-image: url('sora.png'); background-position: top center;"></div><div class="char-name">SORA</div><div class="char-race">Imanity</div></div><div class="char-back"><h3>ç©º (Sora)</h3><br><p class="char-desc">åå…«å²ã€‚æ— ä¸šã€å¤„ç”·ã€æ²Ÿé€šéšœç¢ã€æ¸¸æˆåºŸäººã€‚æ“…é•¿ç­–ç•¥ä¸è¯»å¿ƒï¼Œæ˜¯ã€Œç©ºç™½ã€ä¸­çš„ç­–ç•¥æ‹…å½“ã€‚</p></div></div></div>
                <div class="char-card hover-target"><div class="char-inner"><div class="char-front"><div class="char-avatar" style="background-image: url('shiro.png'); background-position: center;"></div><div class="char-name">SHIRO</div><div class="char-race">Imanity</div></div><div class="char-back"><h3>ç™½ (Shiro)</h3><br><p class="char-desc">åä¸€å²ã€‚ç©ºçš„ä¹‰å¦¹ã€‚æ‹¥æœ‰è¶…ä¹å¸¸äººçš„è®¡ç®—èƒ½åŠ›ï¼Œåªè¦æ˜¯å®Œå…¨æƒ…æŠ¥æ¸¸æˆï¼Œæ— äººèƒ½å‡ºå…¶å³ã€‚</p></div></div></div>
                <div class="char-card hover-target"><div class="char-inner"><div class="char-front"><div class="char-avatar" style="background-image: url('jibril.png'); background-position: top center;"></div><div class="char-name">JIBRIL</div><div class="char-race">FlÃ¼gel</div></div><div class="char-back"><h3>å‰æ™®è‰å°”</h3><br><p class="char-desc">ä½é˜¶åºåˆ—ç¬¬å…­ä½ã€‚æ‹¥æœ‰æå¼ºçš„æˆ˜æ–—åŠ›ä¸çŸ¥è¯†æ¬²ï¼Œç°éš¶å±äºã€Œç©ºç™½ã€çš„æ‰€æœ‰ç‰©ã€‚</p></div></div></div>
                <div class="char-card hover-target"><div class="char-inner"><div class="char-front"><div class="char-avatar" style="background-image: url('steph.png'); background-position: top center;"></div><div class="char-name">STEPH</div><div class="char-race">Imanity</div></div><div class="char-back"><h3>å²è’‚èŠ¬å¦®</h3><br><p class="char-desc">è‰¾å°”å¥‡äºšçš„å‰ç‹æ—å­™å¥³ã€‚è™½ç„¶ç»å¸¸è¢«â€œç©ºç™½â€æ‰å¼„ï¼Œä½†åœ¨æ”¿åŠ¡å’Œäººé™…å…³ç³»ä¸Šæ”¯æ’‘ç€æ•´ä¸ªå›½å®¶ã€‚</p></div></div></div>
                <div class="char-card hover-target"><div class="char-inner"><div class="char-front"><div class="char-avatar" style="background-image: url('izuna.png'); background-position: top center;"></div><div class="char-name">IZUNA</div><div class="char-race">Werebeast</div></div><div class="char-back"><h3>åˆæ¿‘ä¼Šçº²</h3><br><p class="char-desc">å…«å²ã€‚ä¸œéƒ¨è”åˆçš„å¤§ä½¿ã€‚æ‹¥æœ‰æå…¶æ•é”çš„äº”æ„Ÿå’Œåä¸ºâ€œè¡€åâ€çš„èº«ä½“èƒ½åŠ›çªç ´æŠ€èƒ½ã€‚</p></div></div></div>
                <div class="char-card hover-target"><div class="char-inner"><div class="char-front"><div class="char-avatar" style="background-image: url('tet.png'); background-position: top center;"></div><div class="char-name">TET</div><div class="char-race">One True God</div></div><div class="char-back"><h3>ç‰¹å›¾ (Tet)</h3><br><p class="char-desc">æ¸¸æˆä¹‹ç¥ï¼Œä¹Ÿæ˜¯å”¯ä¸€çš„å…¨æƒç¥ã€‚ä½åœ¨å›½é™…è±¡æ£‹æ£‹å­çš„ç‹åº§ä¸Šï¼Œå°†â€œç©ºç™½â€å¬å”¤åˆ°è¿™ä¸ªä¸–ç•Œçš„å§‹ä½œä¿‘è€…ã€‚</p></div></div></div>
            </div>
        </section>

        <footer><p>Â© 2024 Yuu Kamiya, PUBLISHED BY KADOKAWA CORPORATION / NO GAME NO LIFE PARTNERS</p><p>Fan Site Demo - Not Official</p></footer>
    </div>

    <script>
        // ==========================================
        // âš ï¸ å¿…é¡»æ›¿æ¢ï¼šä½ çš„ Google Apps Script URL
        // ==========================================
        const API_URL = "https://script.google.com/macros/s/AKfycbxJBrAx1_jzwNCO6kCSVyJsNANGE4ibdXy5SXva_p54B4Zot8OaJeCm3PdQsIVhdU4v/exec"; 

        // --- Auth Functions ---
        function switchAuth(mode) {
            const ids = ['login-form', 'register-step1', 'register-step2', 'forgot-step1', 'forgot-step2'];
            ids.forEach(id => document.getElementById(id).classList.add('hidden'));
            document.getElementById('error-msg').innerText = "";
            const title = document.getElementById('auth-title');
            if(mode === 'login') { document.getElementById('login-form').classList.remove('hidden'); title.innerText = "SYSTEM LOGIN"; }
            else if (mode === 'register') { document.getElementById('register-step1').classList.remove('hidden'); title.innerText = "NEW PLAYER ENTRY"; }
            else if (mode === 'forgot') { document.getElementById('forgot-step1').classList.remove('hidden'); title.innerText = "RESET PASSWORD"; }
        }

        async function callApi(data) {
            return fetch(API_URL, {
                method: 'POST',
                redirect: 'follow',
                headers: { "Content-Type": "text/plain;charset=utf-8" },
                body: JSON.stringify(data)
            }).then(res => res.json());
        }

        function handleLogin() {
            const e = document.getElementById('login-email').value, p = document.getElementById('login-password').value;
            const btn = document.getElementById('btn-login'), err = document.getElementById('error-msg');
            if(!e || !p) { err.innerText = "INPUT REQUIRED"; return; }
            btn.disabled = true; btn.innerText = "VERIFYING..."; err.innerText = "";
            callApi({action: 'login', email: e, password: p}).then(data => {
                if(data.status === 'success') unlockSite(data.username);
                else { err.innerText = data.message || "LOGIN FAILED"; btn.disabled = false; btn.innerText = "LOGIN"; shakeBox(); }
            }).catch(e => { err.innerText = "CONNECTION ERROR"; btn.disabled = false; btn.innerText = "LOGIN"; });
        }

        let tempRegData = {};
        function requestRegCode() {
            const u = document.getElementById('reg-user').value, e = document.getElementById('reg-email').value, p = document.getElementById('reg-pass').value;
            const btn = document.getElementById('btn-reg-code'), err = document.getElementById('error-msg');
            if(!u || !e || !p) { err.innerText = "INPUT REQUIRED"; return; }
            btn.disabled = true; btn.innerText = "SENDING..."; err.innerText = "";
            callApi({action: 'req_reg_code', email: e}).then(data => {
                if(data.status === 'success') {
                    tempRegData = {username: u, email: e, password: p};
                    document.getElementById('register-step1').classList.add('hidden');
                    document.getElementById('register-step2').classList.remove('hidden');
                    alert("CODE SENT TO EMAIL");
                } else { err.innerText = data.message; btn.disabled = false; btn.innerText = "GET CODE"; }
            }).catch(e => { err.innerText = "NETWORK ERROR"; btn.disabled = false; btn.innerText = "GET CODE"; });
        }

        function confirmRegister() {
            const code = document.getElementById('reg-code').value, btn = document.getElementById('btn-reg-confirm'), err = document.getElementById('error-msg');
            if(!code) { err.innerText = "CODE REQUIRED"; return; }
            btn.disabled = true; btn.innerText = "VERIFYING...";
            callApi({action: 'confirm_register', ...tempRegData, code: code}).then(data => {
                if(data.status === 'success') { alert("REGISTERED. ASCHENTE!"); unlockSite(data.username); }
                else { err.innerText = data.message; btn.disabled = false; btn.innerText = "CONFIRM REGISTER"; }
            }).catch(e => { err.innerText = "ERROR VERIFYING"; btn.disabled = false; btn.innerText = "CONFIRM REGISTER"; });
        }

        let tempResetEmail = "";
        function requestResetCode() {
            const e = document.getElementById('reset-email').value, btn = document.getElementById('btn-reset-code'), err = document.getElementById('error-msg');
            if(!e) { err.innerText = "EMAIL REQUIRED"; return; }
            btn.disabled = true; btn.innerText = "SENDING...";
            callApi({action: 'req_reset_code', email: e}).then(data => {
                if(data.status === 'success') {
                    tempResetEmail = e;
                    document.getElementById('forgot-step1').classList.add('hidden');
                    document.getElementById('forgot-step2').classList.remove('hidden');
                } else { err.innerText = data.message; btn.disabled = false; btn.innerText = "SEND CODE"; }
            });
        }

        function confirmReset() {
            const code = document.getElementById('reset-code').value, pass = document.getElementById('new-password').value;
            const btn = document.getElementById('btn-reset-confirm'), err = document.getElementById('error-msg');
            if(!code || !pass) { err.innerText = "INPUT REQUIRED"; return; }
            btn.disabled = true; btn.innerText = "UPDATING...";
            callApi({action: 'confirm_reset', email: tempResetEmail, code: code, password: pass}).then(data => {
                if(data.status === 'success') { alert("PASSWORD UPDATED. PLEASE LOGIN."); switchAuth('login'); }
                else { err.innerText = data.message; btn.disabled = false; btn.innerText = "UPDATE PASSWORD"; }
            });
        }

        function unlockSite(username) {
            document.getElementById('login-overlay').style.opacity = '0';
            document.body.classList.add('unlocked');
            document.querySelector('.hero p').innerHTML = `WELCOME, PLAYER <span style="color:var(--primary-cyan)">${username}</span>.<br>ASCHENTE!`;
            setTimeout(() => { document.getElementById('login-overlay').style.display = 'none'; initSite(); }, 800);
        }
        function shakeBox() { document.querySelector('.login-box').style.animation = "shake 0.5s"; setTimeout(() => { document.querySelector('.login-box').style.animation = ""; }, 500); }
        document.addEventListener('keypress', function (e) { if (e.key === 'Enter') { if (!document.getElementById('login-form').classList.contains('hidden')) handleLogin(); } });

        // --- Visuals & Reader Logic ---
        function initSite() { const loader = document.getElementById('loader'); loader.style.display = 'flex'; setTimeout(() => { loader.style.opacity = '1'; }, 10); setTimeout(() => { loader.style.opacity = '0'; setTimeout(() => { loader.style.display = 'none'; }, 1000); }, 2000); initParticles(); animate(); }
        const canvas = document.getElementById('bg-canvas'); const ctx = canvas.getContext('2d'); let width = window.innerWidth, height = window.innerHeight; canvas.width = width; canvas.height = height; const symbols = ['â™”', 'â™•', 'â™–', 'â™—', 'â™˜', 'â™™', 'â™ ', 'â™¥', 'â™¦', 'â™£', 'â– ', 'â–²']; const particles = [];
        class Particle { constructor() { this.reset(); this.y = Math.random() * height; } reset() { this.x = Math.random() * width; this.y = -20; this.speed = Math.random() * 1.5 + 0.5; this.size = Math.random() * 20 + 10; this.text = symbols[Math.floor(Math.random() * symbols.length)]; this.color = ['#ff2a6d', '#05d9e8', '#d905e8', '#ffffff'][Math.floor(Math.random() * 4)]; this.opacity = Math.random() * 0.5 + 0.1; this.rotation = Math.random() * 360; this.rotationSpeed = (Math.random() - 0.5) * 2; } update() { this.y += this.speed; this.rotation += this.rotationSpeed; if (this.y > height) this.reset(); } draw() { ctx.save(); ctx.globalAlpha = this.opacity; ctx.fillStyle = this.color; ctx.font = `${this.size}px Arial`; ctx.translate(this.x, this.y); ctx.rotate(this.rotation * Math.PI / 180); ctx.fillText(this.text, 0, 0); ctx.restore(); } }
        function initParticles() { for (let i = 0; i < 50; i++) particles.push(new Particle()); } function animate() { ctx.clearRect(0, 0, width, height); particles.forEach(p => { p.update(); p.draw(); }); requestAnimationFrame(animate); } window.addEventListener('resize', () => { width = window.innerWidth; height = window.innerHeight; canvas.width = width; canvas.height = height; });
        const cursor = document.getElementById('cursor'); document.addEventListener('mousemove', (e) => { cursor.style.left = e.clientX + 'px'; cursor.style.top = e.clientY + 'px'; }); document.body.addEventListener('mouseover', (e) => { if(e.target.closest('.hover-target')) cursor.classList.add('hovered'); else cursor.classList.remove('hovered'); });

        // --- NEW 16 RACES DATA ---
        const worldDisplay = document.getElementById('world-display-area');
        const worldData = {
            disboard: `<h3>DISBOARD (ç›˜ä¸Šä¸–ç•Œ)</h3><div class="world-text"><p>ä¸€åˆ‡éƒ½ç”±æ¸¸æˆå†³å®šçš„ä¸–ç•Œã€‚åœ¨è¿™ä¸ªä¸–ç•Œä¸­ï¼ŒåŒ…æ‹¬å›½å¢ƒçº¿åœ¨å†…çš„æ‰€æœ‰çº çº·éƒ½å¿…é¡»é€šè¿‡æ¸¸æˆæ¥è§£å†³ã€‚</p><br><p>è¿™ä¸ªä¸–ç•Œç”±å”¯ä¸€ç¥ç‰¹å›¾ï¼ˆTetï¼‰æ‰€åˆ›é€ çš„â€œåæ¡ç›Ÿçº¦â€æ‰€çº¦æŸã€‚æš´åŠ›æ˜¯è¢«ç»å¯¹ç¦æ­¢çš„ã€‚</p></div>`,
            history: `<h3>ARCHIVE (å¤å¤§æˆ˜)</h3><div class="world-text"><p>è¯¸ç¥äº‰å¤ºå”¯ä¸€ç¥å®åº§çš„è¿œå¤æˆ˜äº‰ï¼Œæœ€ç»ˆç”±ç‰¹å›¾å–å¾—æ˜Ÿæ¯è€Œç»“æŸã€‚</p></div>`,
            exceed: `
                <h3>IXSEED (åå…­ç§æ—)</h3>
                <div class="world-text">
                    <p style="margin-bottom:20px;">å…¨æƒä»£ç†äººï¼šåå…­ç§æ—å„è‡ªå¯¹åº”å›½é™…è±¡æ£‹çš„ä¸€æšæ£‹å­ã€‚</p>
                    <div class="exceed-board">
                        <!-- Rank 1 -->
                        <div class="piece-card rank-1 hover-target">
                            <div class="piece-rank">I</div>
                            <div class="piece-icon">â™”</div>
                            <div class="piece-info">
                                <div class="piece-chess-role">King</div>
                                <div class="piece-name">Old Deus</div>
                                <div class="piece-jp-name">ç¥çµç§</div>
                                <div class="piece-desc">ä¸–ç•Œçš„æ ¸å¿ƒï¼Œå”¯ä¸€ç¥ç‰¹å›¾æ‰€åœ¨é˜¶çº§ã€‚</div>
                            </div>
                        </div>
                        <!-- Rank 2 -->
                        <div class="piece-card rank-2 hover-target">
                            <div class="piece-rank">II</div>
                            <div class="piece-icon">â™•</div>
                            <div class="piece-info">
                                <div class="piece-chess-role">Queen</div>
                                <div class="piece-name">Phantasma</div>
                                <div class="piece-jp-name">å¹»æƒ³ç§</div>
                                <div class="piece-desc">ä¸–ç•Œè§„æ¨¡çš„ç”Ÿå‘½ä½“ï¼Œä»…å­˜ä¸€ä½ã€‚</div>
                            </div>
                        </div>
                        <!-- Rank 3 -->
                        <div class="piece-card hover-target">
                            <div class="piece-rank">III</div>
                            <div class="piece-icon">â™–</div>
                            <div class="piece-info">
                                <div class="piece-chess-role">Rook</div>
                                <div class="piece-name">Dragonia</div>
                                <div class="piece-jp-name">é¾™ç²¾ç§</div>
                                <div class="piece-desc">é˜²å¾¡ä¸åŠ›é‡æé«˜çš„ç”Ÿç‰©å…µå™¨ã€‚</div>
                            </div>
                        </div>
                        <!-- Rank 4 -->
                        <div class="piece-card hover-target">
                            <div class="piece-rank">IV</div>
                            <div class="piece-icon">â™—</div>
                            <div class="piece-info">
                                <div class="piece-chess-role">Bishop</div>
                                <div class="piece-name">FlÃ¼gel</div>
                                <div class="piece-jp-name">å¤©ç¿¼ç§</div>
                                <div class="piece-desc">é«˜é­”åŠ›ä¸çŸ¥è¯†ï¼Œæœ€å…·ç­ç»åŠ›ã€‚</div>
                            </div>
                        </div>
                        <!-- Rank 5 -->
                        <div class="piece-card hover-target">
                            <div class="piece-rank">V</div>
                            <div class="piece-icon">â™˜</div>
                            <div class="piece-info">
                                <div class="piece-chess-role">Knight</div>
                                <div class="piece-name">Elf</div>
                                <div class="piece-jp-name">æ£®ç²¾ç§</div>
                                <div class="piece-desc">é­”æ³•çµæ´»æ€§æé«˜ï¼Œæœ€å¤§å›½å®¶ã€‚</div>
                            </div>
                        </div>
                        <!-- Rank 6 -->
                        <div class="piece-card hover-target">
                            <div class="piece-rank">VI</div>
                            <div class="piece-icon">â™™</div>
                            <div class="piece-info">
                                <div class="piece-chess-role">Pawn (Promo)</div>
                                <div class="piece-name">Gigant</div>
                                <div class="piece-jp-name">å·¨ç¥ç§</div>
                                <div class="piece-desc">å¯æ— é™æå‡ï¼Œè±¡å¾å…µçš„å‡å˜ã€‚</div>
                            </div>
                        </div>
                        <!-- Rank 7 -->
                        <div class="piece-card hover-target">
                            <div class="piece-rank">VII</div>
                            <div class="piece-icon">ğŸ¨ </div>
                            <div class="piece-info">
                                <div class="piece-chess-role">General (Var)</div>
                                <div class="piece-name">Werebeast</div>
                                <div class="piece-jp-name">å…½äººç§</div>
                                <div class="piece-desc">è±¡å¾å¼ºåŒ–å…µç±»ï¼Œæ„Ÿå®˜æ•é”ã€‚</div>
                            </div>
                        </div>
                        <!-- Rank 8 -->
                        <div class="piece-card hover-target">
                            <div class="piece-rank">VIII</div>
                            <div class="piece-icon">â™™</div>
                            <div class="piece-info">
                                <div class="piece-chess-role">Pawn (Ext)</div>
                                <div class="piece-name">Goblin</div>
                                <div class="piece-jp-name">åœ°ç²¾ç§</div>
                                <div class="piece-desc">å¤šç§å½¢æ€åˆ†æ”¯ï¼Œé”»é€ æŠ€æœ¯å¼ºã€‚</div>
                            </div>
                        </div>
                        <!-- Rank 9 -->
                        <div class="piece-card hover-target">
                            <div class="piece-rank">IX</div>
                            <div class="piece-icon">â™–</div>
                            <div class="piece-info">
                                <div class="piece-chess-role">Rook (Var)</div>
                                <div class="piece-name">Dragonblood</div>
                                <div class="piece-jp-name">å¤©é¾™ç§</div>
                                <div class="piece-desc">è±¡å¾åšå›ºä¸åŠ›é‡ã€‚</div>
                            </div>
                        </div>
                        <!-- Rank 10 -->
                        <div class="piece-card hover-target">
                            <div class="piece-rank">X</div>
                            <div class="piece-icon">â™—</div>
                            <div class="piece-info">
                                <div class="piece-chess-role">Bishop (Var)</div>
                                <div class="piece-name">Demonia</div>
                                <div class="piece-jp-name">å¦–é­”ç§</div>
                                <div class="piece-desc">å¼ºé­”åŠ›ï¼Œè±¡å¾æ–œå‘å½±å“åŠ›ã€‚</div>
                            </div>
                        </div>
                        <!-- Rank 11 -->
                        <div class="piece-card hover-target">
                            <div class="piece-rank">XI</div>
                            <div class="piece-icon">â™•</div>
                            <div class="piece-info">
                                <div class="piece-chess-role">Queen (Weak)</div>
                                <div class="piece-name">Seiren</div>
                                <div class="piece-jp-name">æµ·ç¥ç§</div>
                                <div class="piece-desc">ç”Ÿå‘½åŠ›ç¹ç››ï¼Œä¾é ä»–æ—ç¹æ®–ã€‚</div>
                            </div>
                        </div>
                        <!-- Rank 12 -->
                        <div class="piece-card hover-target">
                            <div class="piece-rank">XII</div>
                            <div class="piece-icon">â™˜</div>
                            <div class="piece-info">
                                <div class="piece-chess-role">Knight (Var)</div>
                                <div class="piece-name">Fairy</div>
                                <div class="piece-jp-name">å¦–ç²¾ç§</div>
                                <div class="piece-desc">è·³è·ƒä¸ä¸å¯é¢„æµ‹çš„è¡ŒåŠ¨æ€§ã€‚</div>
                            </div>
                        </div>
                        <!-- Rank 13 -->
                        <div class="piece-card hover-target">
                            <div class="piece-rank">XIII</div>
                            <div class="piece-icon">â™œ</div>
                            <div class="piece-info">
                                <div class="piece-chess-role">Rook+Bishop</div>
                                <div class="piece-name">Ex-Machina</div>
                                <div class="piece-jp-name">æœºæ¢°ç§</div>
                                <div class="piece-desc">é€»è¾‘ä¸ç«åŠ›ï¼Œåˆä½“æ£‹å­ã€‚</div>
                            </div>
                        </div>
                        <!-- Rank 14 -->
                        <div class="piece-card hover-target">
                            <div class="piece-rank">XIV</div>
                            <div class="piece-icon">â™™</div>
                            <div class="piece-info">
                                <div class="piece-chess-role">Pawn (Spec)</div>
                                <div class="piece-name">Dhampir</div>
                                <div class="piece-jp-name">å¸è¡€é¬¼ç§</div>
                                <div class="piece-desc">é€šè¿‡å¸å–æ”¹å˜çŠ¶æ€ï¼Œè¿›åŒ–æ½œåŠ›ã€‚</div>
                            </div>
                        </div>
                        <!-- Rank 15 -->
                        <div class="piece-card hover-target">
                            <div class="piece-rank">XV</div>
                            <div class="piece-icon">â™™</div>
                            <div class="piece-info">
                                <div class="piece-chess-role">Pawn (Var)</div>
                                <div class="piece-name">Moonver</div>
                                <div class="piece-jp-name">æœˆä¸‹å…½äºº</div>
                                <div class="piece-desc">ç‹¬ç‰¹æŠ€èƒ½ï¼Œä»å½’ä¸ºå…µé˜¶ã€‚</div>
                            </div>
                        </div>
                        <!-- Rank 16 -->
                        <div class="piece-card rank-16 hover-target">
                            <div class="piece-rank">XVI</div>
                            <div class="piece-icon">â™™</div>
                            <div class="piece-info">
                                <div class="piece-chess-role">Pawn</div>
                                <div class="piece-name">Imanity</div>
                                <div class="piece-jp-name">äººç±»ç§</div>
                                <div class="piece-desc">æœ€å¼±ï¼Œä½†èƒ½å‡å˜ä¸ºä»»ä½•æ£‹å­ã€‚</div>
                            </div>
                        </div>
                    </div>
                </div>
            `
        };

        if(worldDisplay) worldDisplay.innerHTML = worldData.disboard;
        function switchWorldTab(tabName) {
            const tabs = document.querySelectorAll('.world-tab'); tabs.forEach(t => t.classList.remove('active'));
            if(tabName === 'disboard') tabs[0].classList.add('active'); if(tabName === 'exceed') tabs[1].classList.add('active'); if(tabName === 'history') tabs[2].classList.add('active');
            worldDisplay.style.opacity = 0; setTimeout(() => { worldDisplay.innerHTML = worldData[tabName]; worldDisplay.style.opacity = 1; }, 200);
        }

        const readerOverlay = document.getElementById('novel-reader'); const readerContent = document.getElementById('reader-content'); const pageInfo = document.getElementById('page-info'); const tocList = document.getElementById('toc-list'); const bookmarkList = document.getElementById('bookmark-list'); let allLines = [], chapters = [], currentLine = 0, totalLines = 0; const LINES_PER_VIEW = 200;
        function startGame() { readerOverlay.classList.add('active'); fetch('novel.txt').then(res => { if (!res.ok) throw new Error(); return res.text(); }).then(text => processNovelData(text)).catch(() => { readerContent.innerHTML = `<div class="fallback-ui"><h2>FILE ERROR</h2><p>æ— æ³•è‡ªåŠ¨åŠ è½½ novel.txt</p><button class="ctrl-btn hover-target" onclick="document.getElementById('file-input').click()">SELECT FILE</button></div>`; }); } function loadFromFile(input) { const file = input.files[0]; if (file) { const reader = new FileReader(); reader.onload = (e) => processNovelData(e.target.result); reader.readAsText(file, "UTF-8"); } } function processNovelData(text) { allLines = text.split('\n'); totalLines = allLines.length; currentLine = 0; generateTOC(); renderView(currentLine); renderBookmarks(); } function generateTOC() { chapters = []; tocList.innerHTML = ''; const chapterRegex = /(?:^\s*ç¬¬\s*[0-9é›¶ä¸€äºŒä¸‰å››äº”å…­ä¸ƒå…«ä¹åç™¾åƒ]+\s*[ç« å›å·èŠ‚])|(?:^\s*Chapter\s*\d+)|(?:^\s*åºç« )|(?:^\s*ç»ˆç« )/i; allLines.forEach((line, index) => { if (line.length < 50 && chapterRegex.test(line)) { chapters.push({ title: line.trim(), lineIndex: index }); } }); if (chapters.length === 0) { tocList.innerHTML = '<div class="list-item">SYSTEM: No Chapter Indexes Found</div>'; } else { chapters.forEach(chap => { const div = document.createElement('div'); div.className = 'list-item hover-target'; div.innerText = chap.title; div.onclick = () => { currentLine = chap.lineIndex; renderView(currentLine); }; tocList.appendChild(div); }); } } function renderView(startLine) { if (totalLines === 0) return; if (startLine < 0) startLine = 0; if (startLine >= totalLines) startLine = totalLines - LINES_PER_VIEW; const endLine = Math.min(startLine + LINES_PER_VIEW, totalLines); const viewLines = allLines.slice(startLine, endLine); readerContent.innerHTML = viewLines.map(line => { const l = line.trim(); return l ? `<p>${l}</p>` : '<br>'; }).join(''); readerContent.scrollTop = 0; const percent = ((startLine / totalLines) * 100).toFixed(1); pageInfo.innerText = `LINE: ${startLine} / ${totalLines} | ${percent}%`; document.getElementById('prev-btn').disabled = (startLine <= 0); document.getElementById('next-btn').disabled = (endLine >= totalLines); highlightCurrentChapter(); } function changeView(dir) { const nextLine = currentLine + (dir * LINES_PER_VIEW); if (nextLine >= -LINES_PER_VIEW && nextLine < totalLines) { currentLine = nextLine; renderView(currentLine); } } function highlightCurrentChapter() { const items = tocList.getElementsByClassName('list-item'); for(let i=0; i<items.length; i++) items[i].classList.remove('active-chapter'); for (let i = chapters.length - 1; i >= 0; i--) { if (chapters[i].lineIndex <= currentLine) { if (items[i]) items[i].classList.add('active-chapter'); break; } } } function getBookmarks() { return JSON.parse(localStorage.getItem('ngnl_bookmarks_v2') || '[]'); } function addBookmark() { const bms = getBookmarks(); let previewText = ""; for(let i=0; i<5; i++) { if(allLines[currentLine+i] && allLines[currentLine+i].trim()) { previewText = allLines[currentLine+i].trim(); break; } } const preview = previewText.substring(0, 25) + "..." || "Line " + currentLine; const newBm = { id: Date.now(), lineIndex: currentLine, preview: preview, date: new Date().toLocaleDateString() }; bms.unshift(newBm); localStorage.setItem('ngnl_bookmarks_v2', JSON.stringify(bms)); renderBookmarks(); alert("MEMORY SAVED: Position Logged."); } function deleteBookmark(id, event) { event.stopPropagation(); let bms = getBookmarks().filter(b => b.id !== id); localStorage.setItem('ngnl_bookmarks_v2', JSON.stringify(bms)); renderBookmarks(); } function renderBookmarks() { const bms = getBookmarks(); bookmarkList.innerHTML = ''; if (bms.length === 0) { bookmarkList.innerHTML = '<div class="list-item">NO DATA</div>'; return; } bms.forEach(bm => { const div = document.createElement('div'); div.className = 'list-item hover-target'; div.innerHTML = `<div style="font-size:0.8rem; color:var(--primary-purple)">${bm.date}</div><div>Line ${bm.lineIndex}: ${bm.preview}</div><span class="delete-bm hover-target" onclick="deleteBookmark(${bm.id}, event)">[DEL]</span>`; div.onclick = () => { currentLine = bm.lineIndex; renderView(currentLine); }; bookmarkList.appendChild(div); }); } function switchTab(tab) { const tabs = document.querySelectorAll('.sidebar-tab'); tabs.forEach(t => t.classList.remove('active')); if (tab === 'toc') { tabs[0].classList.add('active'); tocList.style.display = 'block'; bookmarkList.style.display = 'none'; } else { tabs[1].classList.add('active'); tocList.style.display = 'none'; bookmarkList.style.display = 'block'; } } function closeReader() { readerOverlay.classList.remove('active'); setTimeout(() => { readerContent.innerHTML = ''; }, 500); }

        /* KEYFRAMES FOR SHAKE */
        const styleSheet = document.createElement("style");
        styleSheet.innerText = `
            @keyframes shake {
                0% { transform: translateX(0); }
                25% { transform: translateX(-10px); }
                50% { transform: translateX(10px); }
                75% { transform: translateX(-10px); }
                100% { transform: translateX(0); }
            }
        `;
        document.head.appendChild(styleSheet);

    </script>
</body>
</html>